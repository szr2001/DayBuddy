@using System.Security.Claims
@inject DayBuddy.Services.UserService userService;
@inject Microsoft.AspNetCore.Identity.UserManager<DayBuddyUser> userManager;

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - DayBuddy</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/DayBuddy.styles.css" asp-append-version="true" />
</head>
<body class="d-flex modal vh-100">
    <div class="container-fluid d-flex" style="padding-left: 0rem !important;">
        <div class="col-md-3 col-lg-2 sidebar py-4 border-end d-flex flex-column">
            <div class="container">
                <div class="d-flex justify-content-center">
                    <img src="/Assets/Images/hug.png" class="" width="30" />
                    <a class="text-grass-green navbar-brand pb-0"
                       style="font-family: Lapsus Pro; font-size:18px"
                       asp-area="" asp-controller="Home" asp-action="Index">
                        DayBuddy
                    </a>
                </div>
                <hr class="w-75 container"/>
                <ul class="nav text-center m-1 flex-column">
                    <a class="btn text-white green-outline-focus border-0 btn-outline-success background-grass-green  rounded-pill m-1 fw-bold" asp-area="" asp-controller="DayBuddy" asp-action="SearchBuddy">Find A Buddy!</a>
                    <a class="btn text-white green-outline-focus border-0 rounded-pill m-1 btn-info fw-bold" asp-area="" asp-controller="Payment" asp-action="Premium">Upgrade To Premium</a>
                    <a class="nav-link fw-bold text-black-50 hover-dark" asp-area="" asp-controller="Account" asp-action="Profile">Edit Profile</a>
                    <a class="nav-link fw-bold text-black-50 hover-dark" asp-area="" asp-controller="Account" asp-action="Profile">Inventory</a>
                    <a class="nav-link fw-bold text-black-50 hover-dark" asp-area="" asp-controller="Account" asp-action="LogOut">Log Out</a>
                </ul>
                @{
                    DayBuddyUser? user = await userManager.GetUserAsync(User);
                    if (user != null)
                    {
                        if (!userService.IsPremiumUser(user))
                        {
                            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1174266192650963"
                                    crossorigin="anonymous"></script>
                            <ins class="adsbygoogle"
                                 style="display:block"
                                 data-ad-client="ca-pub-3940256099942544"
                                 data-ad-slot="1005530332"
                                 data-ad-format="auto"
                                 data-full-width-responsive="true"></ins>
                            <script>
                                (adsbygoogle = window.adsbygoogle || []).push({});
                            </script>
                        }
                        else
                        {
                            <div class="bg-danger container-fluid"></div>
                        }
                    }
                }
            </div>
        </div>

        <div class="container-fluid p-3">
            <main role="main" class="h-100 pb-3">
                @RenderBody()
            </main>
        </div>
    </div>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
